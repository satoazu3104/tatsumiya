{"version":3,"file":"assets/js/blocks/bodytext.js","mappings":"2LAoGA,IAlG0BA,EAAEC,aAAYC,oBAEtC,MAmBMC,EAAmBC,IACvB,MAAMC,EAAeC,OAAOC,eAAeC,WACrCC,EAAaH,OAAOC,eAAeG,UAAUC,cAAcC,QAAQ,cACzE,IAAIH,EAAY,OAEhB,MACMI,EADKJ,EAAWK,GACLC,QAAQ,QAAS,IAC5BC,EAnBOC,EAACZ,EAAcD,KAChB,CACVc,IAAK,6BAA+Bb,EAAe,UACnDc,UAAW,8BAA8Bd,EAAa,UACtDe,SAAU,+BAA+Bf,EAAa,UACtDgB,YAAa,gCAAgChB,EAAa,UAC1DiB,UAAW,8BAA8BjB,EAAa,UACtDkB,eAAgB,qCAAqClB,EAAa,WAEzDD,IAUCa,CAAOZ,EAAcD,GAE3BoB,EADQvB,EAAWY,GACEE,QAAQV,EAAcW,GACjDd,EAAc,CAAE,CAACW,GAAQW,GAAa,EAGlCC,EAAeC,IACnB,MAAMb,EAhCaP,OAAOC,eAAeG,UAAUC,cAAcC,QAAQ,cACnDE,GACLC,QAAQ,QAAS,IA+BlC,IAAIY,EAAYrB,OAAOC,eAAeqB,WAAW,GACjDC,QAAQC,IAAIH,GACZ,MAAMI,EAAMC,SAASC,cAAc,MACnCF,EAAIG,UAAUC,IAAIT,GAClBC,EAAUS,WAAWL,GACrB,MAAMM,EAAUV,EAAUW,wBAAwBC,UAClDV,QAAQC,IAAIjB,EAAOwB,GACnBnC,EAAc,CAAC,CAACW,GAAQwB,GAAS,EAGnC,OACEG,GAAAC,QAAAR,cAAAO,GAAAC,QAAAC,SAAA,KACEF,GAAAC,QAAAR,cAACU,EAAAA,sBAAqB,CACpBC,KAAK,cACLC,MAAM,WACNC,QAASA,IAAM3C,EAAgB,OAAO4C,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,GAAAC,aAAA,KAExCZ,GAAAC,QAAAR,cAACU,EAAAA,sBAAqB,CACpBC,KAAK,cACLC,MAAM,WACNC,QAASA,IAAM3C,EAAgB,aAAa4C,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,GAAAC,aAAA,KAE9CZ,GAAAC,QAAAR,cAACU,EAAAA,sBAAqB,CACpBC,KAAK,cACLC,MAAM,UACNC,QAASA,IAAM3C,EAAgB,YAAY4C,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,GAAAC,aAAA,KAE7CZ,GAAAC,QAAAR,cAACU,EAAAA,sBAAqB,CACpBC,KAAK,cACLC,MAAM,aACNC,QAASA,IAAM3C,EAAgB,eAAe4C,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,GAAAC,aAAA,KAEhDZ,GAAAC,QAAAR,cAACU,EAAAA,sBAAqB,CACpBC,KAAK,cACLC,MAAM,UACNC,QAASA,IAAM3C,EAAgB,aAAa4C,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,GAAAC,aAAA,KAE9CZ,GAAAC,QAAAR,cAACU,EAAAA,sBAAqB,CACpBC,KAAK,cACLC,MAAM,QACNC,QAASA,IAAM3C,EAAgB,kBAAkB4C,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,GAAAC,aAAA,KAEnDZ,GAAAC,QAAAR,cAACU,EAAAA,sBAAqB,CACpBC,KAAK,cACLC,MAAM,gBACNC,QAASA,IAAMrB,EAAY,MAAMsB,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,GAAAC,aAAA,KAEnCZ,GAAAC,QAAAR,cAACU,EAAAA,sBAAqB,CACpBC,KAAK,cACLC,MAAM,iBACNC,QAASA,IAAMrB,EAAY,MAAMsB,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,GAAAC,aAAA,KAEnCZ,GAAAC,QAAAR,cAACU,EAAAA,sBAAqB,CACpBC,KAAK,cACLC,MAAM,UACNC,QAASrB,EAAYsB,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,GAAAC,aAAA,KAEtB,C,sFC/FPC,EAAOC,QAAUhD,OAAW,GAAe,W,GCCvCiD,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaJ,QAGrB,IAAID,EAASE,EAAyBE,GAAY,CAGjDH,QAAS,CAAC,GAOX,OAHAM,EAAoBH,GAAUJ,EAAQA,EAAOC,QAASE,GAG/CH,EAAOC,OACf,CCrBAE,EAAoBK,EAAI,SAASR,GAChC,IAAIS,EAAST,GAAUA,EAAOU,WAC7B,WAAa,OAAOV,EAAgB,OAAG,EACvC,WAAa,OAAOA,CAAQ,EAE7B,OADAG,EAAoBQ,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CACR,ECNAN,EAAoBQ,EAAI,SAASV,EAASY,GACzC,IAAI,IAAIC,KAAOD,EACXV,EAAoBY,EAAEF,EAAYC,KAASX,EAAoBY,EAAEd,EAASa,IAC5EE,OAAOC,eAAehB,EAASa,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAG3E,ECPAX,EAAoBY,EAAI,SAASK,EAAKC,GAAQ,OAAOL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,EAAO,ECAtG,IAAI,EAA+BpE,OAAW,GAAU,O,kBCApD,EAA+BA,OAAW,GAAc,W,2FCK5D,MAAMwE,EAAa,CACjB,CACE1E,KAAM,SACNyC,MAAO,QACPnB,UAAW,kBAEb,CACEtB,KAAM,WACNyC,MAAO,OACPnB,UAAW,qBAEb,CACEtB,KAAM,QACNyC,MAAO,WACPnB,UAAW,iBAEb,CACEtB,KAAM,aACNyC,MAAO,OACPnB,UAAW,wBAITqD,EAAc,CAClB,CACE3E,KAAM,KACNyC,MAAO,UACPnB,UAAW,IAEb,CACEtB,KAAM,MACNyC,MAAO,eACPnB,UAAW,eAEb,CACEtB,KAAM,KACNyC,MAAO,SACPnB,UAAW,eAITsD,EAAUA,EAAGC,aAAY/E,mBAE3BsC,GAAAC,QAAAR,cAAAO,GAAAC,QAAAC,SAAA,KACEF,GAAAC,QAAAR,cAAA,UACEiD,MAAOD,EACPE,SAAWC,GAAUlF,EAAc,CAAE+E,WAAYG,EAAMC,OAAOH,QAASnC,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,GAAAC,aAAA,IAEtE2B,EAAYO,KAAI,CAACC,EAAMC,IAEpBhD,GAAAC,QAAAR,cAAA,UAAQkC,IAAKqB,EAAON,MAAOK,EAAK7D,UAAUqB,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,GAAAC,aAAA,KACvCmC,EAAK1C,WASd4C,EAAYA,EAAGC,YAAWxF,mBAE5BsC,GAAAC,QAAAR,cAAAO,GAAAC,QAAAC,SAAA,KACEF,GAAAC,QAAAR,cAAA,UACEiD,MAAOQ,EACPP,SAAWC,GAAUlF,EAAc,CAAEwF,UAAWN,EAAMC,OAAOH,QAASnC,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,GAAAC,aAAA,IAErE0B,EAAWQ,KAAI,CAACC,EAAMC,IAEnBhD,GAAAC,QAAAR,cAAA,UAAQkC,IAAKqB,EAAON,MAAOK,EAAK7D,UAAUqB,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,GAAAC,aAAA,KACvCmC,EAAK1C,YASpB8C,EAAAA,EAAAA,mBAAkB,mBAAoB,CACpC9C,MAAO,KACPD,KAAM,SACNgD,SAAU,SACV3F,WAAY,CACV4F,KAAM,CACJC,KAAM,SACNC,QAAS,IAEXL,UAAW,CACTI,KAAM,SACNC,QAAS,kBAEXd,WAAY,CACVa,KAAM,SACNC,QAAS,IAEXC,aAAc,CACZF,KAAM,SACNC,QAAS,IAEXE,MAAO,CACLH,KAAM,SACNC,QAAS,KAIbG,KAAMA,EAAGxE,YAAWzB,aAAYA,YAAc4F,OAAMH,YAAWT,aAAYe,eAAcC,SAAS/F,mBAa9FsC,GAAAC,QAAAR,cAAA,OAAAc,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,IAAAC,aAAA,IACEZ,GAAAC,QAAAR,cAACkE,EAAAA,cAAa,CAAApD,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,IAAAC,aAAA,IACZZ,GAAAC,QAAAR,cAACwD,EAAS,CAACC,UAAWA,EAAWxF,cAAeA,EAAc6C,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,IAAAC,aAAA,MAC9DZ,GAAAC,QAAAR,cAAC+C,EAAO,CAACC,WAAYA,EAAY/E,cAAeA,EAAc6C,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,IAAAC,aAAA,MAC9DZ,GAAAC,QAAAR,cAACjC,EAAAA,EAAiB,CAACC,WAAYA,EAAYC,cAAeA,EAAc6C,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,IAAAC,aAAA,OAE1EZ,GAAAC,QAAAR,cAACmE,EAAAA,kBAAiB,CAAArD,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,IAAAC,aAAA,IAChBZ,GAAAC,QAAAR,cAACoE,EAAAA,gBAAe,CACdxF,MAAM,UACNqE,MAAOc,EACPb,SAtBemB,IACrBpG,EAAc,CACZ8F,aAAcM,GACd,EAmB4BvD,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,IAAAC,aAAA,MAE1BZ,GAAAC,QAAAR,cAACsE,EAAAA,YAAW,CACV1F,MAAM,OACNqE,MAAOe,EACPd,SAtBYqB,IAClBtG,EAAc,CACZ+F,MAAOO,GACP,EAmByBzD,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,IAAAC,aAAA,OAGzBZ,GAAAC,QAAAR,cAACwE,EAAAA,SAAQ,CACPvB,MAAOW,EACPV,SAAUmB,GAAWpG,EAAc,CAAE2F,KAAMS,IAC3CI,QAAQ,IACRC,YAAY,cACZC,wBAAwB,EACxBlF,UAAWgE,EAAY,IAAMT,EAC7B4B,eAAe,EACf/F,GAAG,YAAWiC,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,IAAAC,aAAA,MAKtB0D,KAAMA,EAAGpF,YAAWzB,YAAc4F,OAAMH,YAAWT,aAAYgB,QAAOD,oBACpE,MAAMe,EAAWf,EAAajF,QAAQ,MAAO,KAC7C,OACEyB,GAAAC,QAAAR,cAAAO,GAAAC,QAAAC,SAAA,KACEF,GAAAC,QAAAR,cAACwE,EAAAA,SAASO,QAAO,CACf9B,MAAOW,EACPa,QAAQ,IACRhF,UAAWqF,EAAWA,EAAW,IAAM9B,EAAaH,EAAa,mBAAqBG,EACtFnE,GAAImF,EAAMlD,YAAA,EAAAC,SAAA,CAAAC,SAAAC,EAAAC,WAAA,IAAAC,aAAA,KAEX,G","sources":["webpack://portart/./src/js/blocks/component/CustomInner/CustomInnerButton.js","webpack://portart/external window [\"wp\",\"blockEditor\"]","webpack://portart/webpack/bootstrap","webpack://portart/webpack/runtime/compat get default export","webpack://portart/webpack/runtime/define property getters","webpack://portart/webpack/runtime/hasOwnProperty shorthand","webpack://portart/external window [\"wp\",\"blocks\"]","webpack://portart/external window [\"wp\",\"components\"]","webpack://portart/./src/js/blocks/bodytext.js"],"sourcesContent":["import { RichTextToolbarButton } from '@wordpress/block-editor';\n\nconst CustomInnerButton = ({attributes, setAttributes}) => {\n  \n  const Label = () => {\n    const selectRich = window.getSelection().focusNode.parentElement.closest('.rich-text');\n    const id = selectRich.id;\n    const label = id.replace('attr-', '');\n    return label;\n  }\n  \n  const tagDot = (selectedText, name) => {\n    const tag = {\n      dot: '<span class=\"c-text--dot\">' + selectedText + '</span>',\n      mainColor: '<span class=\"c-text--main\">'+selectedText+'</span>',\n      subColor: '<span class=\"c-text--main2\">'+selectedText+'</span>',\n      accentColor: '<span class=\"c-text--accent\">'+selectedText+'</span>',\n      backColor: '<span class=\"c-text--back\">'+selectedText+'</span>',\n      backBlackColor: '<span class=\"c-text--back--black\">'+selectedText+'</span>',\n    };\n    return tag[name];\n  }\n\n  const insertCustomTag = (name) => {\n    const selectedText = window.getSelection().toString();\n    const selectRich = window.getSelection().focusNode.parentElement.closest('.rich-text');\n    if(!selectRich) return;\n\n    const id = selectRich.id;\n    const label = id.replace('attr-', '');\n    const tag = tagDot(selectedText, name);\n    let content = attributes[label];\n    const newContent = content.replace(selectedText, tag);\n    setAttributes({ [label]: newContent });\n  };\n  \n  const insertBrTag = (className) => {\n    const label = Label();\n    let selectPos = window.getSelection().getRangeAt(0);\n    console.log(selectPos);\n    const elm = document.createElement('br');\n    elm.classList.add(className);\n    selectPos.insertNode(elm);\n    const content = selectPos.commonAncestorContainer.innerHTML;\n    console.log(label, content);\n    setAttributes({[label]: content})\n  }\n\n  return(\n    <>\n      <RichTextToolbarButton\n        icon=\"editor-code\"\n        title=\"上付きドットタグ\"\n        onClick={() => insertCustomTag('dot')}\n      />\n      <RichTextToolbarButton\n        icon=\"editor-code\"\n        title=\"メインカラータグ\"\n        onClick={() => insertCustomTag('mainColor')}\n      />\n      <RichTextToolbarButton\n        icon=\"editor-code\"\n        title=\"サブカラータグ\"\n        onClick={() => insertCustomTag('subColor')}\n      />\n      <RichTextToolbarButton\n        icon=\"editor-code\"\n        title=\"アクセントカラータグ\"\n        onClick={() => insertCustomTag('accentColor')}\n      />\n      <RichTextToolbarButton\n        icon=\"editor-code\"\n        title=\"背景カラータグ\"\n        onClick={() => insertCustomTag('backColor')}\n      />\n      <RichTextToolbarButton\n        icon=\"editor-code\"\n        title=\"背景黒タグ\"\n        onClick={() => insertCustomTag('backBlackColor')}\n      />\n      <RichTextToolbarButton\n        icon=\"editor-code\"\n        title=\"PCサイズにbrタグを挿入\"\n        onClick={() => insertBrTag('pc')}\n      />\n      <RichTextToolbarButton\n        icon=\"editor-code\"\n        title=\"スマホサイズにbrタグを挿入\"\n        onClick={() => insertBrTag('sp')}\n      />\n      <RichTextToolbarButton\n        icon=\"editor-code\"\n        title=\"brタグを挿入\"\n        onClick={insertBrTag}\n      />\n    </>\n  )\n};\n\n\nexport default CustomInnerButton;","module.exports = window[\"wp\"][\"blockEditor\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blocks\"];","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"components\"];","import { registerBlockType } from '@wordpress/blocks';\nimport { RichText, BlockControls, InspectorControls } from '@wordpress/block-editor';\nimport { CustomInnerButton } from './component/CustomInner';\nimport { TextControl, TextareaControl } from '@wordpress/components';\n\nconst variations = [\n  {\n    name: 'normal',\n    title: '通常サイズ',\n    className: 'c-text__normal'\n  },\n  {\n    name: 'titleReg',\n    title: '18px',\n    className: 'c-text__title-reg'\n  },\n  {\n    name: 'title',\n    title: '18px 太文字',\n    className: 'c-text__title'\n  },\n  {\n    name: 'longHeight',\n    title: '行間高め',\n    className: 'c-text__long-height'\n  }\n];\n\nconst fontfamilys = [\n  {\n    name: 'jp',\n    title: '日本語フォント',\n    className: ''\n  },\n  {\n    name: 'jp2',\n    title: '日本語フォント(セリフ)',\n    className: 'c-text--jp2'\n  },\n  {\n    name: 'en',\n    title: '英語フォント',\n    className: 'c-text--en'\n  },\n];\n\nconst Familys = ({ fontfamily, setAttributes }) => {\n  return (\n    <>\n      <select\n        value={fontfamily}\n        onChange={(event) => setAttributes({ fontfamily: event.target.value })}\n      >\n        {fontfamilys.map((item, index) => {\n          return (\n            <option key={index} value={item.className}>\n              {item.title}\n            </option>\n          );\n        })}\n      </select>\n    </>\n  )\n}\n\nconst Variation = ({ variation, setAttributes }) => {\n  return (\n    <>\n      <select\n        value={variation}\n        onChange={(event) => setAttributes({ variation: event.target.value })}\n      >\n        {variations.map((item, index) => {\n          return (\n            <option key={index} value={item.className}>\n              {item.title}\n            </option>\n          );\n        })}\n      </select>\n    </>\n  );\n};\n\nregisterBlockType('portart/bodytext', {\n  title: '本文',\n  icon: 'smiley',\n  category: 'layout',\n  attributes: {\n    text: {\n      type: 'string',\n      default: '',\n    },\n    variation: {\n      type: 'string',\n      default: 'c-text__normal',\n    },\n    fontfamily: {\n      type: 'string',\n      default: ''\n    },\n    addClassName: {\n      type: 'string',\n      default: '',\n    },\n    addId: {\n      type: 'string',\n      default: '',\n    }\n  },\n\n  edit: ({ className, attributes, attributes: { text, variation, fontfamily, addClassName, addId }, setAttributes }) => {\n    const onChangeClass = (newText) => {\n      setAttributes({\n        addClassName: newText\n      });\n    }\n    const onChangeId = (newId) => {\n      setAttributes({\n        addId: newId\n      });\n    }\n\n    return (\n      <div>\n        <BlockControls>\n          <Variation variation={variation} setAttributes={setAttributes} />\n          <Familys fontfamily={fontfamily} setAttributes={setAttributes} />\n          <CustomInnerButton attributes={attributes} setAttributes={setAttributes} />\n        </BlockControls>\n        <InspectorControls>\n          <TextareaControl\n            label=\"追加class\"\n            value={addClassName}\n            onChange={onChangeClass}\n          />\n          <TextControl\n            label=\"追加Id\"\n            value={addId}\n            onChange={onChangeId}\n          />\n        </InspectorControls>\n        <RichText\n          value={text}\n          onChange={newText => setAttributes({ text: newText })}\n          tagName='p'\n          placeholder=\"本文を入力してください\"\n          keepPlaceholderOnFocus={true}\n          className={variation + ' ' + fontfamily}\n          inlineToolbar={true}\n          id=\"attr-text\"\n        />\n      </div>\n    )\n  },\n  save: ({ className, attributes: { text, variation, fontfamily, addId, addClassName } }) => {\n    const fixClass = addClassName.replace(/\\n/g, ' ');\n    return (\n      <>\n        <RichText.Content\n          value={text}\n          tagName='p'\n          className={fixClass ? fixClass + ' ' + fontfamily : variations + ' c-text__normal ' + fontfamily}\n          id={addId}\n        />\n      </>\n    )\n  },\n});"],"names":["CustomInnerButton","attributes","setAttributes","insertCustomTag","name","selectedText","window","getSelection","toString","selectRich","focusNode","parentElement","closest","label","id","replace","tag","tagDot","dot","mainColor","subColor","accentColor","backColor","backBlackColor","newContent","insertBrTag","className","selectPos","getRangeAt","console","log","elm","document","createElement","classList","add","insertNode","content","commonAncestorContainer","innerHTML","wp","element","Fragment","RichTextToolbarButton","icon","title","onClick","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","module","exports","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","variations","fontfamilys","Familys","fontfamily","value","onChange","event","target","map","item","index","Variation","variation","registerBlockType","category","text","type","default","addClassName","addId","edit","BlockControls","InspectorControls","TextareaControl","newText","TextControl","newId","RichText","tagName","placeholder","keepPlaceholderOnFocus","inlineToolbar","save","fixClass","Content"],"sourceRoot":""}