!function(){"use strict";var e={684:function(e,l,t){var m=t(427),r=t(715),n=t(87),a="/home/sato/sato/serve/www/tatsumiya/wp-content/themes/origin/src/js/blocks/component/MediaUpload/ImageSelector.js";l.A=({...e})=>{let l=e.attributes;const t=e.index,o=e.setAttributes;let i=e.count;const u=e.slug,s=void 0===t,[c,_]=(0,n.useState)(s?l[u]:l[t][u]);console.log(s);const d=(e,t,m)=>{if(e&&e.url)if(s)_(e.url),o({[t]:e.url});else{let r=l;console.log(r),r[m][t]=e.url,_(e.url),o({blocksData:r,count:i++})}},N=(e,t)=>{if(s)_(""),o({[e]:""});else{let m=l;m[t][e]="",_(""),o({blocksData:m,count:i++})}};return s?wp.element.createElement(wp.element.Fragment,null,c&&wp.element.createElement("img",{className:"b-media__img",src:c,alt:"Uploaded Image",__self:void 0,__source:{fileName:a,lineNumber:88,columnNumber:22}}),wp.element.createElement(r.MediaUploadCheck,{__self:void 0,__source:{fileName:a,lineNumber:91,columnNumber:9}},wp.element.createElement(r.MediaUpload,{onSelect:e=>d(e,u),allowedTypes:["image"],value:l[u],render:({open:e})=>wp.element.createElement(m.Button,{onClick:e,isPrimary:!0,__self:void 0,__source:{fileName:a,lineNumber:97,columnNumber:15}},"画像を選択"),__self:void 0,__source:{fileName:a,lineNumber:92,columnNumber:11}})),""!==l[u]&&wp.element.createElement(r.MediaUploadCheck,{__self:void 0,__source:{fileName:a,lineNumber:104,columnNumber:11}},wp.element.createElement(m.Button,{onClick:()=>N(u),isLink:!0,isDestructive:!0,className:"removeImage",__self:void 0,__source:{fileName:a,lineNumber:105,columnNumber:13}},"画像を削除"))):wp.element.createElement(wp.element.Fragment,null,c&&wp.element.createElement("img",{src:c,alt:"Uploaded Image",__self:void 0,__source:{fileName:a,lineNumber:56,columnNumber:20}}),wp.element.createElement(r.MediaUploadCheck,{__self:void 0,__source:{fileName:a,lineNumber:59,columnNumber:7}},wp.element.createElement(r.MediaUpload,{onSelect:e=>d(e,u,t),allowedTypes:["image"],value:l[t][u],render:({open:e})=>wp.element.createElement(m.Button,{onClick:e,isPrimary:!0,__self:void 0,__source:{fileName:a,lineNumber:65,columnNumber:13}},"画像を選択"),__self:void 0,__source:{fileName:a,lineNumber:60,columnNumber:9}})),""!==l[u]&&wp.element.createElement(r.MediaUploadCheck,{__self:void 0,__source:{fileName:a,lineNumber:72,columnNumber:9}},wp.element.createElement(m.Button,{onClick:()=>N(u,t),isLink:!0,isDestructive:!0,className:"removeImage",__self:void 0,__source:{fileName:a,lineNumber:73,columnNumber:11}},"画像を削除")))}},760:function(e,l,t){t.d(l,{L:function(){return m.A}});var m=t(684);t(917)},917:function(e,l,t){t(87)},715:function(e){e.exports=window.wp.blockEditor},427:function(e){e.exports=window.wp.components},87:function(e){e.exports=window.wp.element}},l={};function t(m){var r=l[m];if(void 0!==r)return r.exports;var n=l[m]={exports:{}};return e[m](n,n.exports,t),n.exports}t.n=function(e){var l=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(l,{a:l}),l},t.d=function(e,l){for(var m in l)t.o(l,m)&&!t.o(e,m)&&Object.defineProperty(e,m,{enumerable:!0,get:l[m]})},t.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)};var m=window.wp.blocks,r=t(427),n=t(715),a=t(760),o=t(87),i=window.wp.apiFetch,u=t.n(i),s="/home/sato/sato/serve/www/tatsumiya/wp-content/themes/origin/src/js/blocks/medias.js";function c(){return c=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var t=arguments[l];for(var m in t)({}).hasOwnProperty.call(t,m)&&(e[m]=t[m])}return e},c.apply(null,arguments)}(0,m.registerBlockType)("portart/medias",{title:"画像",icon:"smiley",category:"layout",attributes:{imageUploadUrl:{type:"string",default:""},mobileImageUploadUrl:{type:"string",default:""},addAttr:{type:"string",default:""},imageUrl:{type:"string",default:""},mobileImageUrl:{type:"string",default:""},addClassName:{type:"string",default:""}},edit:({className:e,attributes:l,setAttributes:t})=>{const[m,i]=(0,o.useState)(!1),c=()=>i(!1),_=({onImageSelect:e,imageUrl:l,label:t})=>{const[m,n]=(0,o.useState)([]),[a,i]=(0,o.useState)(!0);(0,o.useEffect)((()=>{u()({path:"/mytheme/v1/theme-images/"}).then((e=>{n(e),i(!1)}))}),[]);const c=m.find((e=>e.url===portartMedia.themeUrl+l))?.url||"";return a?wp.element.createElement("p",{__self:void 0,__source:{fileName:s,lineNumber:66,columnNumber:9}},"Loading..."):wp.element.createElement(r.SelectControl,{label:t??"テーマの画像を選択",value:c,options:[{label:"画像を選択",value:""},...m.map((e=>({label:e.name,value:e.url})))],onChange:l=>e(l),__self:void 0,__source:{fileName:s,lineNumber:68,columnNumber:9}})},{imageUrl:d,mobileImageUrl:N,imageUploadUrl:p,addAttr:b,mobileImageUploadUrl:f,addClassName:w}=l;return portartMedia.themeUrl,wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(n.InspectorControls,{__self:void 0,__source:{fileName:s,lineNumber:99,columnNumber:9}},wp.element.createElement("div",{className:"components-base-control",__self:void 0,__source:{fileName:s,lineNumber:100,columnNumber:11}},wp.element.createElement("p",{__self:void 0,__source:{fileName:s,lineNumber:102,columnNumber:13}},"デスクトップ用画像のアップロード"),wp.element.createElement(a.L,{attributes:l,setAttributes:t,slug:"imageUploadUrl",__self:void 0,__source:{fileName:s,lineNumber:105,columnNumber:13}})),wp.element.createElement("div",{className:"components-base-control",__self:void 0,__source:{fileName:s,lineNumber:108,columnNumber:11}},wp.element.createElement("p",{__self:void 0,__source:{fileName:s,lineNumber:110,columnNumber:13}},"モバイル用画像のアップロード"),wp.element.createElement(a.L,{attributes:l,setAttributes:t,slug:"mobileImageUploadUrl",__self:void 0,__source:{fileName:s,lineNumber:113,columnNumber:13}})),wp.element.createElement(r.TextareaControl,{label:"追加class",value:w,onChange:e=>{t({addClassName:e})},__self:void 0,__source:{fileName:s,lineNumber:116,columnNumber:11}}),wp.element.createElement(r.TextControl,{label:"追加Attr",value:b,onChange:e=>{t({addAttr:e})},__self:void 0,__source:{fileName:s,lineNumber:125,columnNumber:11}})),m&&wp.element.createElement(r.Modal,{title:"画像を選択",onRequestClose:c,__self:void 0,__source:{fileName:s,lineNumber:133,columnNumber:11}},wp.element.createElement(_,{imageUrl:d,onImageSelect:e=>{const l=e.replace(new RegExp(`^${portartMedia.themeUrl}`),"");t({imageUrl:l})},__self:void 0,__source:{fileName:s,lineNumber:138,columnNumber:13}}),wp.element.createElement(_,{label:"スマホのテーマ画像を選択",imageUrl:N,onImageSelect:e=>{const l=e.replace(new RegExp(`^${portartMedia.themeUrl}`),"");t({mobileImageUrl:l})},__self:void 0,__source:{fileName:s,lineNumber:139,columnNumber:13}}),wp.element.createElement(r.Button,{isPrimary:!0,onClick:c,__self:void 0,__source:{fileName:s,lineNumber:141,columnNumber:13}},"閉じる")),wp.element.createElement("div",{className:"b-media__group",__self:void 0,__source:{fileName:s,lineNumber:147,columnNumber:9}},wp.element.createElement(r.Button,{isPrimary:!0,onClick:()=>i(!0),__self:void 0,__source:{fileName:s,lineNumber:148,columnNumber:11}},"テーマフォルダから画像を選択する"),wp.element.createElement("div",{className:"b-media__group__inner",__self:void 0,__source:{fileName:s,lineNumber:152,columnNumber:11}},(d||p)&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("div",{__self:void 0,__source:{fileName:s,lineNumber:155,columnNumber:17}},wp.element.createElement("p",{__self:void 0,__source:{fileName:s,lineNumber:156,columnNumber:19}},"PC画像"),wp.element.createElement("img",{className:"b-media__img",src:p||portartMedia.themeUrl+d,alt:"",__self:void 0,__source:{fileName:s,lineNumber:157,columnNumber:19}}))),(N||f)&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("div",{__self:void 0,__source:{fileName:s,lineNumber:163,columnNumber:17}},wp.element.createElement("p",{__self:void 0,__source:{fileName:s,lineNumber:164,columnNumber:19}},"スマホ画像"),wp.element.createElement("img",{className:"b-media__img",src:f||portartMedia.themeUrl+N,alt:"",__self:void 0,__source:{fileName:s,lineNumber:165,columnNumber:19}}))))))},save:({attributes:e})=>{const{imageUrl:l,mobileImageUrl:t,imageUploadUrl:m,mobileImageUploadUrl:r,addClassName:n,addAttr:a}=e,o=n+"\n",i=o.replace(/\n/g," "),u=o.replace(/\n/g,"__picture "),_=a.split(" ");let d={};for(let e=0;e<_.length;e++){const l=_[e].substr(0,_[e].indexOf("=")),t=_[e].substr(_[e].indexOf("=")+1).replace(/"/g,"");d[l]=t}return wp.element.createElement(wp.element.Fragment,null,(l||m)&&wp.element.createElement("picture",{className:u,__self:void 0,__source:{fileName:s,lineNumber:191,columnNumber:11}},(t||r)&&wp.element.createElement("source",{className:r?i:i+"block-media","data-src":t,srcSet:r||"",media:"(max-width: 1024px)",__self:void 0,__source:{fileName:s,lineNumber:193,columnNumber:15}}),wp.element.createElement("img",c({},d,{className:m?i:i+"block-media","data-src":l,src:m||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC",alt:"media",__self:void 0,__source:{fileName:s,lineNumber:195,columnNumber:13}}))))}})}();
//# sourceMappingURL=medias.js.map